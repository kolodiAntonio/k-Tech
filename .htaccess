RewriteEngine On

# ----------------------------------------------------
# 1) Jedna kanonska domena: https://k-tech.com.hr
#    (force HTTPS + remove www u jednom redirectu)
# ----------------------------------------------------
RewriteCond %{HTTPS} !=on [OR]
RewriteCond %{HTTP_HOST} ^www\.k-tech\.com\.hr$ [NC]
RewriteRule ^ https://k-tech.com.hr%{REQUEST_URI} [R=301,L]

# ----------------------------------------------------
# 2) /index ili /index.html -> /
# ----------------------------------------------------
RewriteCond %{THE_REQUEST} \s/+index(\.html)?[\s?] [NC]
RewriteRule ^index(\.html)?$ https://k-tech.com.hr/ [R=301,L]

# ----------------------------------------------------
# 3) .html -> clean (npr. /kontakt.html -> /kontakt)
# ----------------------------------------------------
RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?] [NC]
RewriteRule ^(.+)\.html$ https://k-tech.com.hr/%1 [R=301,L]

# ----------------------------------------------------
# 4) Interno mapiranje: /kontakt -> /kontakt.html
#    (samo ako ne postoji file/folder)
# ----------------------------------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ $1.html [L]
